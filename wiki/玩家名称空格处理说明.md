# 玩家名称空格处理说明

## ⚠️ 重要提示

**如果玩家名包含空格，必须使用引号括起来！**

---

## 🎯 为什么需要引号？

在命令行中，空格通常用于分隔不同的参数。如果玩家名包含空格，系统会将其识别为多个参数，导致指令执行失败。

### 错误示例 ❌

```
添加白名单 Cool Player
```

**系统识别为**:
- 参数1: `Cool`
- 参数2: `Player` (被忽略或识别为其他参数)

**结果**: 只会尝试添加名为 `Cool` 的玩家，而不是 `Cool Player`

---

### 正确示例 ✅

```
添加白名单 "Cool Player"
```

**系统识别为**:
- 参数1: `Cool Player` (完整的玩家名)

**结果**: 正确添加名为 `Cool Player` 的玩家

---

## 📋 涉及玩家名称的指令

### 简化指令

#### 1. 添加白名单
```bash
# 无空格玩家名
添加白名单 Steve

# 有空格玩家名 - 使用引号
添加白名单 "Cool Player"
添加白名单 "My Friend"
```

---

### 完整指令

#### 1. 添加白名单
```bash
# 无空格
mochi.whitelist.add survival Steve

# 有空格 - 使用引号
mochi.whitelist.add survival "Cool Player"
```

#### 2. 移除白名单
```bash
# 无空格
mochi.whitelist.remove survival Steve

# 有空格 - 使用引号
mochi.whitelist.remove survival "Cool Player"
```

#### 3. 查看玩家信息
```bash
# 无空格
mochi.player.info survival Steve

# 有空格 - 使用引号
mochi.player.info survival "Cool Player"
```

#### 4. 踢出玩家
```bash
# 无空格玩家名，无踢出原因
mochi.player.kick survival Steve

# 有空格玩家名 - 使用引号
mochi.player.kick survival "Cool Player"

# 玩家名和原因都有空格 - 都使用引号
mochi.player.kick survival "Cool Player" "Violation of rules"
```

---

## 🔍 引号类型

### 支持的引号类型

Koishi 支持以下引号类型：

1. **双引号** (推荐)
   ```
   添加白名单 "Cool Player"
   ```

2. **单引号**
   ```
   添加白名单 'Cool Player'
   ```

3. **中文引号** (部分支持)
   ```
   添加白名单 "Cool Player"
   ```

**推荐使用双引号 `""`**，兼容性最好。

---

## 📝 常见场景

### 场景 1: 基岩版玩家

基岩版玩家名通常不包含空格，可以直接使用：

```
添加白名单 Steve
添加白名单 Alex123
添加白名单 CoolGamer
```

---

### 场景 2: Java 版非正版玩家

某些非正版服务器允许玩家使用包含空格的名称：

```
添加白名单 "Cool Player"
添加白名单 "My Friend 123"
添加白名单 "玩家 名字"
```

---

### 场景 3: 踢出玩家并说明原因

原因通常包含空格，需要使用引号：

```bash
# 玩家名无空格，原因有空格
mochi.player.kick survival Steve "Violation of server rules"

# 玩家名和原因都有空格
mochi.player.kick survival "Cool Player" "Repeated violations"
```

---

## ⚠️ 常见错误

### 错误 1: 忘记使用引号

**错误**:
```
添加白名单 Cool Player
```

**系统行为**:
- 只识别 `Cool` 作为玩家名
- `Player` 被忽略或导致错误

**正确**:
```
添加白名单 "Cool Player"
```

---

### 错误 2: 引号不匹配

**错误**:
```
添加白名单 "Cool Player
添加白名单 Cool Player"
```

**系统行为**:
- 引号不匹配，导致解析错误

**正确**:
```
添加白名单 "Cool Player"
```

---

### 错误 3: 使用中文引号（不推荐）

**不推荐**:
```
添加白名单 "Cool Player"
```

**推荐**:
```
添加白名单 "Cool Player"
```

**原因**: 中文引号在某些情况下可能不被正确识别

---

## 🎓 技术说明

### Koishi 参数类型

在 Koishi 中，我们使用 `:text` 参数类型来支持引号：

```typescript
// 支持引号的参数定义
ctx.command('添加白名单 <player:text>', '快速添加白名单')

// 不支持引号的参数定义（旧版）
ctx.command('添加白名单 <player>', '快速添加白名单')
```

`:text` 类型会：
1. 识别引号括起来的内容为单个参数
2. 自动去除引号
3. 保留引号内的空格

---

## 📊 对比表

| 玩家名 | 不使用引号 | 使用引号 | 结果 |
|--------|-----------|---------|------|
| `Steve` | `添加白名单 Steve` | `添加白名单 "Steve"` | ✅ 都正确 |
| `Cool Player` | `添加白名单 Cool Player` | `添加白名单 "Cool Player"` | ❌ 前者错误，后者正确 |
| `My Friend 123` | `添加白名单 My Friend 123` | `添加白名单 "My Friend 123"` | ❌ 前者错误，后者正确 |

---

## 💡 最佳实践

### 建议 1: 始终使用引号

即使玩家名不包含空格，使用引号也不会出错：

```
添加白名单 "Steve"      # ✅ 正确
添加白名单 Steve        # ✅ 也正确
添加白名单 "Cool Player" # ✅ 必须使用引号
```

**建议**: 养成始终使用引号的习惯，避免出错。

---

### 建议 2: 使用双引号

双引号兼容性最好：

```
✅ 推荐: 添加白名单 "Cool Player"
⚠️ 可用: 添加白名单 'Cool Player'
❌ 不推荐: 添加白名单 "Cool Player"
```

---

### 建议 3: 复制粘贴玩家名

如果不确定玩家名是否包含空格，可以：

1. 使用 `在线` 指令查看在线玩家
2. 复制玩家名
3. 粘贴到指令中并加上引号

```
在线                          # 查看在线玩家
添加白名单 "复制的玩家名"      # 粘贴并加引号
```

---

## 🔧 故障排除

### 问题 1: 提示"玩家不存在"

**可能原因**: 玩家名识别错误（空格问题）

**解决方法**:
1. 确认玩家名是否包含空格
2. 使用引号括起来
3. 使用 `在线` 指令确认玩家名的准确拼写

---

### 问题 2: 指令无响应

**可能原因**: 引号不匹配

**解决方法**:
1. 检查引号是否成对出现
2. 确保使用英文引号 `""`
3. 重新输入指令

---

### 问题 3: 添加了错误的玩家

**可能原因**: 忘记使用引号，只添加了玩家名的第一部分

**解决方法**:
1. 使用 `mochi.whitelist.list` 查看白名单
2. 移除错误的条目
3. 使用引号重新添加正确的玩家名

---

## 📚 相关文档

- [简化指令使用指南](./简化指令使用指南.md)
- [简化指令快速参考](./简化指令快速参考.md)

---

## 🎯 总结

### 记住这些要点

1. ✅ **玩家名包含空格 = 必须使用引号**
2. ✅ **推荐使用双引号 `""`**
3. ✅ **引号必须成对出现**
4. ✅ **养成始终使用引号的习惯**
5. ✅ **不确定时，先用 `在线` 指令查看玩家名**

### 快速示例

```bash
# 无空格 - 可以不用引号
添加白名单 Steve

# 有空格 - 必须使用引号
添加白名单 "Cool Player"

# 最佳实践 - 始终使用引号
添加白名单 "Steve"
添加白名单 "Cool Player"
```

---

**文档版本**: 1.0.0  
**最后更新**: 2024-01-01  
**适用版本**: Mochi-Link v2.0.0+
