# Mochi-Link 简化指令使用指南

## 概述

为了方便日常使用，Mochi-Link 提供了一系列简化指令，让用户可以快速执行常用操作，无需输入完整的命令路径。

## 前置条件

使用简化指令前，需要先在群组中绑定服务器：

```
mochi.bind.add <服务器ID>
```

绑定后，简化指令会自动使用绑定的服务器，无需每次指定服务器 ID。

---

## 简化指令列表

### 1. 添加白名单

**指令**: `添加白名单 <玩家名>`

**别名**: 
- `白名单添加 <玩家名>`
- `wl <玩家名>`

**权限要求**: Level 2 (受信任用户)

**功能**: 快速将玩家添加到绑定服务器的白名单

**使用示例**:
```
添加白名单 Steve
白名单添加 Alex
wl Notch
添加白名单 "Player Name"  # 玩家名包含空格时使用引号
```

**重要提示**:
- ⚠️ 如果玩家名包含空格，必须使用引号括起来
- 示例: `添加白名单 "Cool Player"`
- 不使用引号会导致只识别第一个单词

**返回示例**:
```
✅ 已将 Steve 添加到服务器 生存服 的白名单
```

**错误提示**:
- 未绑定服务器: `请先在群组中绑定服务器`
- 服务器离线: `服务器 生存服 的白名单功能需要服务器连接`
- 权限不足: `权限不足：需要受信任用户权限（等级 2）`

---

### 2. 查看在线玩家

**指令**: `在线`

**别名**: 
- `online`
- `玩家`

**权限要求**: Level 1 (所有用户)

**功能**: 查看绑定服务器的在线玩家列表和服务器状态

**使用示例**:
```
在线
online
玩家
```

**返回示例**:
```
📊 服务器状态 - 生存服
━━━━━━━━━━━━━━━━━━━━
🎮 版本: Paper 1.20.4
⚙️ 核心: Paper
📈 TPS: 19.8
💾 内存: 2048MB / 4096MB (50.0%)
⏱️ 运行时间: 5小时30分钟
━━━━━━━━━━━━━━━━━━━━
👥 在线玩家: 3 / 20
━━━━━━━━━━━━━━━━━━━━
1. Steve (50ms, world, SURVIVAL)
2. Alex (45ms, world_nether, CREATIVE)
3. Notch (30ms, world, SURVIVAL)
```

**显示信息**:
- 🎮 服务器版本
- ⚙️ 服务器核心
- 📈 TPS (每秒刻数)
- 💾 内存使用情况
- ⏱️ 服务器运行时间
- 👥 在线玩家数量
- 玩家列表（包含延迟、所在世界、游戏模式）

**错误提示**:
- 未绑定服务器: `请先在群组中绑定服务器`
- 服务器离线: `❌ 服务器 生存服 当前离线`
- 无在线玩家: `当前无玩家在线`

---

## 完整使用流程

### 步骤 1: 绑定服务器

首先，管理员需要在群组中绑定服务器：

```
mochi.bind.add survival
```

返回:
```
已将服务器 生存服 绑定到当前群组
绑定类型: full
绑定 ID: 1
提示: 现在可以在群组中直接使用命令，无需指定服务器 ID
```

### 步骤 2: 使用简化指令

绑定后，所有用户都可以使用简化指令：

**查看在线玩家**:
```
在线
```

**添加白名单** (需要权限):
```
添加白名单 NewPlayer
```

---

## 与完整指令的对比

### 添加白名单

**完整指令**:
```
mochi.whitelist.add survival Steve
```

**简化指令**:
```
添加白名单 Steve
```

**优势**:
- ✅ 更短、更易记
- ✅ 自动使用绑定的服务器
- ✅ 支持中文指令
- ✅ 多个别名可选

---

### 查看在线玩家

**完整指令**:
```
mochi.player.list survival
```

**简化指令**:
```
在线
```

**优势**:
- ✅ 一个字即可查询
- ✅ 显示更多服务器状态信息
- ✅ 格式化输出更美观
- ✅ 包含 TPS、内存等关键指标

---

## 权限说明

### Level 1 (所有用户)
- ✅ `在线` - 查看在线玩家和服务器状态

### Level 2 (受信任用户)
- ✅ `添加白名单` - 添加玩家到白名单

### Level 3 (管理员)
- ✅ `mochi.bind.add` - 绑定服务器到群组

---

## 常见问题

### Q1: 为什么提示"请先在群组中绑定服务器"？

**A**: 简化指令依赖群组绑定功能。请先使用 `mochi.bind.add <服务器ID>` 绑定服务器。

### Q2: 可以在私聊中使用简化指令吗？

**A**: 不可以。简化指令需要群组绑定，只能在群组中使用。私聊请使用完整指令并指定服务器 ID。

### Q3: 一个群组可以绑定多个服务器吗？

**A**: 可以绑定多个服务器，但简化指令只会使用第一个绑定的服务器（主服务器）。

### Q4: 如何查看当前群组绑定了哪些服务器？

**A**: 使用 `mochi.bind.list` 查看当前群组的所有绑定。

### Q5: 简化指令支持哪些服务器核心？

**A**: 支持所有 Mochi-Link 支持的核心：
- Java 版: Paper, Folia, Fabric, Forge, Spigot
- 基岩版: LLBDS, Nukkit, PMMP

---

## 技术细节

### 数据流向

简化指令与完整指令使用相同的底层服务：

```
简化指令
    ↓
获取群组绑定的服务器 ID
    ↓
Service Layer (服务层)
    ↓
Bridge Layer (桥接层)
    ↓
WebSocket (U-WBP v2 协议)
    ↓
Minecraft Server
```

### WebSocket 操作

**添加白名单**:
- 操作: `whitelist.add`
- 协议: U-WBP v2 request

**查看在线玩家**:
- 操作: `player.list` + `server.get_status`
- 协议: U-WBP v2 request

### 审计日志

所有简化指令的操作都会记录审计日志：
- 操作类型
- 执行用户
- 操作时间
- 操作结果
- 错误信息（如果失败）

---

## 未来计划

### 即将添加的简化指令

1. **移除白名单**
   - `移除白名单 <玩家名>`
   - `wlr <玩家名>`

2. **踢出玩家**
   - `踢出 <玩家名> [原因]`
   - `kick <玩家名> [原因]`

3. **服务器状态**
   - `状态`
   - `status`

4. **执行命令**
   - `执行 <命令>`
   - `exec <命令>`

### 建议和反馈

如果你有其他简化指令的建议，欢迎提出！

---

## 示例场景

### 场景 1: 新玩家申请白名单

**玩家**: "管理员，我想加入服务器，ID 是 NewPlayer123"

**管理员**: 
```
添加白名单 NewPlayer123
```

**系统返回**:
```
✅ 已将 NewPlayer123 添加到服务器 生存服 的白名单
```

**管理员**: "已添加，可以进服了！"

---

### 场景 2: 查看服务器人数

**玩家**: "现在服务器有多少人在线？"

**任何用户**:
```
在线
```

**系统返回**:
```
📊 服务器状态 - 生存服
━━━━━━━━━━━━━━━━━━━━
🎮 版本: Paper 1.20.4
⚙️ 核心: Paper
📈 TPS: 19.8
💾 内存: 2048MB / 4096MB (50.0%)
⏱️ 运行时间: 5小时30分钟
━━━━━━━━━━━━━━━━━━━━
👥 在线玩家: 5 / 20
━━━━━━━━━━━━━━━━━━━━
1. Steve (50ms, world, SURVIVAL)
2. Alex (45ms, world_nether, CREATIVE)
3. Notch (30ms, world, SURVIVAL)
4. Herobrine (60ms, world_the_end, ADVENTURE)
5. Jeb (35ms, world, SURVIVAL)
```

**玩家**: "人不少啊，我也上线！"

---

## 总结

简化指令让 Mochi-Link 的使用更加便捷：

✅ **更短的指令** - 减少输入，提高效率  
✅ **中文支持** - 更符合中文用户习惯  
✅ **自动绑定** - 无需每次指定服务器  
✅ **丰富信息** - 显示更多有用的状态数据  
✅ **多个别名** - 适应不同用户习惯  

开始使用简化指令，让服务器管理更轻松！

---

**文档版本**: 1.0.0  
**最后更新**: 2024-01-01  
**适用版本**: Mochi-Link v2.0.0+
