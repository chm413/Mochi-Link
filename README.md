# Mochi-Link (å¤§ç¦è¿) - Minecraft ç»Ÿä¸€ç®¡ç†ä¸ç›‘æ§ç³»ç»Ÿ

[![npm](https://img.shields.io/npm/v/koishi-plugin-mochi-link)](https://www.npmjs.com/package/koishi-plugin-mochi-link)
[![License](https://img.shields.io/github/license/your-org/koishi-plugin-mochi-link)](https://github.com/your-org/koishi-plugin-mochi-link/blob/main/LICENSE)

Mochi-Linkï¼ˆå¤§ç¦è¿ï¼‰æ˜¯ä¸€ä¸ªåŸºäº Koishi æ¡†æ¶çš„ Minecraft ç»Ÿä¸€ç®¡ç†ä¸ç›‘æ§ç³»ç»Ÿã€‚å¦‚åŒå¤§ç¦ï¼ˆéº»è–¯ï¼‰ä¸€æ ·å…·æœ‰æå¼ºçš„é»æ€§å’ŒåŒ…å®¹æ€§ï¼ŒæŠŠå„ç§æ ¸å¿ƒï¼ˆLLBDSã€Paperã€Folia ç­‰ï¼‰è½¯ç³¯åœ°åŒ…è£¹åœ¨ä¸€èµ·ï¼Œåˆ›å»ºä¸€ä¸ª"å…¨æ ¸å¿ƒç»Ÿä¸€"çš„ MC æœåŠ¡å™¨ç®¡ç†å±‚ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

### ğŸ¯ è·¨æ ¸å¿ƒç»Ÿä¸€æ¥å£
- æ”¯æŒ Java ç‰ˆæœåŠ¡å™¨ï¼šPaperã€Foliaã€Fabricã€Forgeã€Mohistã€Geyser
- æ”¯æŒåŸºå²©ç‰ˆæœåŠ¡å™¨ï¼šLLBDSã€Nukkitã€PMMPã€BDS
- é€šè¿‡æ ‡å‡†åŒ–çš„ U-WBP v2 åè®®ç»Ÿä¸€ç®¡ç†ä¸åŒæ ¸å¿ƒ

### ğŸ”— çµæ´»çš„è¿æ¥æ¶æ„
- **æ­£å‘è¿æ¥**ï¼šKoishi æ’ä»¶ä½œä¸ºå®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨
- **åå‘è¿æ¥**ï¼šæœåŠ¡å™¨ä½œä¸ºå®¢æˆ·ç«¯è¿æ¥åˆ° Koishi æ’ä»¶
- **å¤šç§æ¥å…¥æ¨¡å¼**ï¼šæ’ä»¶ã€RCONã€ç»ˆç«¯æ³¨å…¥

### ğŸ‘¥ å¤šæœåŠ¡å™¨ç®¡ç†
- å•ä¸ª Koishi å®ä¾‹ç®¡ç†å¤šå° MC æœåŠ¡å™¨
- ç¾¤èŠä¸æœåŠ¡å™¨çš„å¤šå¯¹å¤šç»‘å®šå…³ç³»
- åŸºäºæœåŠ¡å™¨ ID çš„æƒé™åˆ†ç¦»æ§åˆ¶

### ğŸ›¡ï¸ å®Œå–„çš„å®‰å…¨æœºåˆ¶
- API ä»¤ç‰Œè®¤è¯å’Œ IP ç™½åå•
- å¯é€‰çš„ AES/RSA é€šä¿¡åŠ å¯†
- åŸºäºè§’è‰²çš„æƒé™ç®¡ç†ç³»ç»Ÿ
- å®Œæ•´çš„å®¡è®¡æ—¥å¿—è®°å½•

### ğŸ“Š å®æ—¶ç›‘æ§æ¨é€
- ç©å®¶äº‹ä»¶ï¼šåŠ å…¥ã€ç¦»å¼€ã€èŠå¤©ã€æ­»äº¡ã€æˆå°±
- æœåŠ¡å™¨çŠ¶æ€ï¼šåœ¨çº¿çŠ¶æ€ã€TPSã€å†…å­˜ä½¿ç”¨
- æ€§èƒ½å‘Šè­¦ï¼šTPS è¿‡ä½ã€å†…å­˜è¿‡é«˜ã€ç©å®¶æ´ªæ°´æ”»å‡»

### ğŸ® ç»Ÿä¸€ç©å®¶ç®¡ç†
- è·¨æœåŠ¡å™¨ç©å®¶ä¿¡æ¯èšåˆ
- éæ­£ç‰ˆç©å®¶èº«ä»½è¯†åˆ«
- ç»Ÿä¸€çš„é»‘ç™½åå•å’Œå°ç¦ç³»ç»Ÿ
- ç¦»çº¿æ“ä½œç¼“å­˜å’ŒåŒæ­¥

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

#### ä» npm å®‰è£…ï¼ˆå³å°†å‘å¸ƒï¼‰

```bash
npm install koishi-plugin-mochi-link
```

æˆ–è€…åœ¨ Koishi æ§åˆ¶å°ä¸­æœç´¢ "mochi-link" è¿›è¡Œå®‰è£…ã€‚

#### ä» GitHub å®‰è£…ï¼ˆå½“å‰æ¨èï¼‰

ç”±äºæ’ä»¶å°šæœªå‘å¸ƒåˆ° npmï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®‰è£…ï¼š

**å¼€å‘ç¯å¢ƒ**:
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/chm413/Mochi-Link.git
cd Mochi-Link

# å®‰è£…ä¾èµ–å¹¶æ„å»º
npm install
npm run build

# åœ¨ Koishi é¡¹ç›®ä¸­å®‰è£…
cd /path/to/koishi-project
npm install file:../Mochi-Link
```

**ç”Ÿäº§ç¯å¢ƒ**:
```bash
# ç›´æ¥ä» GitHub å®‰è£…
npm install git+https://github.com/chm413/Mochi-Link.git

# æˆ–å®‰è£…ç‰¹å®šç‰ˆæœ¬
npm install git+https://github.com/chm413/Mochi-Link.git#v1.0.0
```

> ğŸ“– è¯¦ç»†å®‰è£…è¯´æ˜è¯·æŸ¥çœ‹ [KOISHI_INSTALLATION_GUIDE.md](./KOISHI_INSTALLATION_GUIDE.md)  
> ğŸš€ å¿«é€Ÿå‚è€ƒè¯·æŸ¥çœ‹ [QUICK_INSTALL.md](./QUICK_INSTALL.md)

### åŸºç¡€é…ç½®

1. **å¯ç”¨æ’ä»¶**ï¼šåœ¨ Koishi æ§åˆ¶å°ä¸­å¯ç”¨ Mochi-Link æ’ä»¶
2. **é…ç½®æ•°æ®åº“**ï¼šç¡®ä¿ Koishi å·²é…ç½®æ•°æ®åº“æœåŠ¡
3. **è®¾ç½®ç«¯å£**ï¼šé…ç½® WebSocket å’Œ HTTP API ç«¯å£
4. **å®‰è£… Bridge**ï¼šåœ¨ç›®æ ‡ MC æœåŠ¡å™¨ä¸Šå®‰è£…å¯¹åº”çš„ Connector Bridge

### æœåŠ¡å™¨æ³¨å†Œ

```bash
# æ³¨å†Œ Java ç‰ˆæœåŠ¡å™¨
mochi register java-server --core paper --host 127.0.0.1 --port 25565

# æ³¨å†ŒåŸºå²©ç‰ˆæœåŠ¡å™¨  
mochi register bedrock-server --core llbds --host 127.0.0.1 --port 19132

# æŸ¥çœ‹æœåŠ¡å™¨åˆ—è¡¨
mochi list

# æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€
mochi status java-server
```

## ğŸ“– è¯¦ç»†æ–‡æ¡£

### é…ç½®é€‰é¡¹

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `websocket.port` | number | 8080 | WebSocket æœåŠ¡ç«¯å£ |
| `websocket.host` | string | 0.0.0.0 | WebSocket æœåŠ¡åœ°å€ |
| `http.port` | number | 8081 | HTTP API ç«¯å£ |
| `security.tokenExpiry` | number | 86400 | ä»¤ç‰Œè¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ |
| `monitoring.reportInterval` | number | 30 | çŠ¶æ€ä¸ŠæŠ¥é—´éš”ï¼ˆç§’ï¼‰ |

### API æ¥å£

#### æœåŠ¡å™¨ç®¡ç†
- `GET /api/servers` - è·å–æœåŠ¡å™¨åˆ—è¡¨
- `POST /api/servers` - æ³¨å†Œæ–°æœåŠ¡å™¨
- `PUT /api/servers/:id` - æ›´æ–°æœåŠ¡å™¨é…ç½®
- `DELETE /api/servers/:id` - åˆ é™¤æœåŠ¡å™¨

#### ç©å®¶ç®¡ç†
- `GET /api/servers/:id/players` - è·å–ç©å®¶åˆ—è¡¨
- `GET /api/servers/:id/players/:playerId` - è·å–ç©å®¶è¯¦æƒ…
- `POST /api/servers/:id/players/:playerId/kick` - è¸¢å‡ºç©å®¶

#### å‘½ä»¤æ‰§è¡Œ
- `POST /api/servers/:id/commands` - æ‰§è¡Œæ§åˆ¶å°å‘½ä»¤
- `POST /api/servers/:id/actions` - æ‰§è¡Œå¿«æ·æ“ä½œ

### WebSocket åè®®

Mochi-Link ä½¿ç”¨ U-WBP v2 (Unified WebSocket Bridge Protocol v2) è¿›è¡Œé€šä¿¡ï¼š

```json
{
  "type": "request",
  "id": "uuid-string",
  "op": "player.list",
  "data": {},
  "timestamp": 1234567890,
  "serverId": "server-id"
}
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/koishi-plugin-mochi-link.git
cd koishi-plugin-mochi-link

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# è¿è¡Œæµ‹è¯•
npm test

# æ„å»ºé¡¹ç›®
npm run build
```

### æµ‹è¯•

é¡¹ç›®ä½¿ç”¨ Jest å’Œ fast-check è¿›è¡Œå•å…ƒæµ‹è¯•å’Œå±æ€§æµ‹è¯•ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# ç›‘å¬æ¨¡å¼
npm run test:watch

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¤–éƒ¨ç®¡ç†ç³»ç»Ÿ   â”‚    â”‚   Web ç®¡ç†é¢æ¿   â”‚    â”‚   Koishi æœºå™¨äºº  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Mochi-Link æ’ä»¶      â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                    â”‚  â”‚ HTTP APIâ”‚WebSocketâ”‚   â”‚
                    â”‚  â”‚ Server  â”‚ Server  â”‚   â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚  â”‚   Core Services     â”‚ â”‚
                    â”‚  â”‚ - Protocol Handler  â”‚ â”‚
                    â”‚  â”‚ - Connection Mgr    â”‚ â”‚
                    â”‚  â”‚ - Permission Mgr    â”‚ â”‚
                    â”‚  â”‚ - Data Synchronizer â”‚ â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚  â”‚   Koishi Database   â”‚ â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Connector Bridges     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Java æœåŠ¡å™¨   â”‚        â”‚   åŸºå²©ç‰ˆæœåŠ¡å™¨   â”‚       â”‚   å…¶ä»–æ ¸å¿ƒæœåŠ¡å™¨  â”‚
â”‚ Paper/Folia   â”‚        â”‚  LLBDS/PMMP    â”‚       â”‚ Fabric/Forge    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

1. **è¿æ¥å»ºç«‹**ï¼šConnector Bridge ä¸ Koishi æ’ä»¶å»ºç«‹ WebSocket è¿æ¥
2. **è®¤è¯æ¡æ‰‹**ï¼šäº¤æ¢è®¤è¯ä¿¡æ¯å’Œèƒ½åŠ›å£°æ˜
3. **äº‹ä»¶æ¨é€**ï¼šæœåŠ¡å™¨äº‹ä»¶å®æ—¶æ¨é€åˆ°ç®¡ç†ç«¯
4. **å‘½ä»¤æ‰§è¡Œ**ï¼šç®¡ç†ç«¯å‘é€å‘½ä»¤åˆ°æœåŠ¡å™¨æ‰§è¡Œ
5. **çŠ¶æ€åŒæ­¥**ï¼šå®šæœŸåŒæ­¥æœåŠ¡å™¨çŠ¶æ€å’Œç©å®¶ä¿¡æ¯

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ¤ æ”¯æŒ

- ğŸ“§ é‚®ä»¶ï¼šchm@ling-hong.top
- ğŸ’¬ QQç¾¤ï¼š1083149656
- ğŸ› é—®é¢˜åé¦ˆï¼š[GitHub Issues](https://github.com/chm413/Mochi-Link/issues)
- ğŸ“– æ–‡æ¡£ï¼š[Wiki](https://github.com/chm413/Mochi-Link/wiki)

## ğŸ™ è‡´è°¢

- [Koishi](https://koishi.chat/) - ä¼˜ç§€çš„èŠå¤©æœºå™¨äººæ¡†æ¶
- [Paper](https://papermc.io/) - é«˜æ€§èƒ½çš„ Minecraft æœåŠ¡ç«¯
- [LLBDS](https://github.com/LiteLDev/LiteLoaderBDS) - åŸºå²©ç‰ˆæœåŠ¡å™¨æ’ä»¶åŠ è½½å™¨

---

**Mochi-Link (å¤§ç¦è¿)** - è®© Minecraft æœåŠ¡å™¨ç®¡ç†å˜å¾—ç®€å•è€Œç»Ÿä¸€ ğŸ®âœ¨
